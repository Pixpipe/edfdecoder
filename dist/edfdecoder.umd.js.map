{"version":3,"file":"edfdecoder.umd.js","sources":["../node_modules/codecutils/dist/codecutils.umd.js","../src/Edf.js","../src/EdfDecoder.js"],"sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.codecutils = {})));\n}(this, (function (exports) { 'use strict';\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar traverse_1 = createCommonjsModule(function (module) {\n\tvar traverse = module.exports = function (obj) {\n\t    return new Traverse(obj);\n\t};\n\n\tfunction Traverse (obj) {\n\t    this.value = obj;\n\t}\n\n\tTraverse.prototype.get = function (ps) {\n\t    var node = this.value;\n\t    for (var i = 0; i < ps.length; i ++) {\n\t        var key = ps[i];\n\t        if (!node || !hasOwnProperty.call(node, key)) {\n\t            node = undefined;\n\t            break;\n\t        }\n\t        node = node[key];\n\t    }\n\t    return node;\n\t};\n\n\tTraverse.prototype.has = function (ps) {\n\t    var node = this.value;\n\t    for (var i = 0; i < ps.length; i ++) {\n\t        var key = ps[i];\n\t        if (!node || !hasOwnProperty.call(node, key)) {\n\t            return false;\n\t        }\n\t        node = node[key];\n\t    }\n\t    return true;\n\t};\n\n\tTraverse.prototype.set = function (ps, value) {\n\t    var node = this.value;\n\t    for (var i = 0; i < ps.length - 1; i ++) {\n\t        var key = ps[i];\n\t        if (!hasOwnProperty.call(node, key)) node[key] = {};\n\t        node = node[key];\n\t    }\n\t    node[ps[i]] = value;\n\t    return value;\n\t};\n\n\tTraverse.prototype.map = function (cb) {\n\t    return walk(this.value, cb, true);\n\t};\n\n\tTraverse.prototype.forEach = function (cb) {\n\t    this.value = walk(this.value, cb, false);\n\t    return this.value;\n\t};\n\n\tTraverse.prototype.reduce = function (cb, init) {\n\t    var skip = arguments.length === 1;\n\t    var acc = skip ? this.value : init;\n\t    this.forEach(function (x) {\n\t        if (!this.isRoot || !skip) {\n\t            acc = cb.call(this, acc, x);\n\t        }\n\t    });\n\t    return acc;\n\t};\n\n\tTraverse.prototype.paths = function () {\n\t    var acc = [];\n\t    this.forEach(function (x) {\n\t        acc.push(this.path); \n\t    });\n\t    return acc;\n\t};\n\n\tTraverse.prototype.nodes = function () {\n\t    var acc = [];\n\t    this.forEach(function (x) {\n\t        acc.push(this.node);\n\t    });\n\t    return acc;\n\t};\n\n\tTraverse.prototype.clone = function () {\n\t    var parents = [], nodes = [];\n\t    \n\t    return (function clone (src) {\n\t        for (var i = 0; i < parents.length; i++) {\n\t            if (parents[i] === src) {\n\t                return nodes[i];\n\t            }\n\t        }\n\t        \n\t        if (typeof src === 'object' && src !== null) {\n\t            var dst = copy(src);\n\t            \n\t            parents.push(src);\n\t            nodes.push(dst);\n\t            \n\t            forEach(objectKeys(src), function (key) {\n\t                dst[key] = clone(src[key]);\n\t            });\n\t            \n\t            parents.pop();\n\t            nodes.pop();\n\t            return dst;\n\t        }\n\t        else {\n\t            return src;\n\t        }\n\t    })(this.value);\n\t};\n\n\tfunction walk (root, cb, immutable) {\n\t    var path = [];\n\t    var parents = [];\n\t    var alive = true;\n\t    \n\t    return (function walker (node_) {\n\t        var node = immutable ? copy(node_) : node_;\n\t        var modifiers = {};\n\t        \n\t        var keepGoing = true;\n\t        \n\t        var state = {\n\t            node : node,\n\t            node_ : node_,\n\t            path : [].concat(path),\n\t            parent : parents[parents.length - 1],\n\t            parents : parents,\n\t            key : path.slice(-1)[0],\n\t            isRoot : path.length === 0,\n\t            level : path.length,\n\t            circular : null,\n\t            update : function (x, stopHere) {\n\t                if (!state.isRoot) {\n\t                    state.parent.node[state.key] = x;\n\t                }\n\t                state.node = x;\n\t                if (stopHere) keepGoing = false;\n\t            },\n\t            'delete' : function (stopHere) {\n\t                delete state.parent.node[state.key];\n\t                if (stopHere) keepGoing = false;\n\t            },\n\t            remove : function (stopHere) {\n\t                if (isArray(state.parent.node)) {\n\t                    state.parent.node.splice(state.key, 1);\n\t                }\n\t                else {\n\t                    delete state.parent.node[state.key];\n\t                }\n\t                if (stopHere) keepGoing = false;\n\t            },\n\t            keys : null,\n\t            before : function (f) { modifiers.before = f; },\n\t            after : function (f) { modifiers.after = f; },\n\t            pre : function (f) { modifiers.pre = f; },\n\t            post : function (f) { modifiers.post = f; },\n\t            stop : function () { alive = false; },\n\t            block : function () { keepGoing = false; }\n\t        };\n\t        \n\t        if (!alive) return state;\n\t        \n\t        function updateState() {\n\t            if (typeof state.node === 'object' && state.node !== null) {\n\t                if (!state.keys || state.node_ !== state.node) {\n\t                    state.keys = objectKeys(state.node);\n\t                }\n\t                \n\t                state.isLeaf = state.keys.length == 0;\n\t                \n\t                for (var i = 0; i < parents.length; i++) {\n\t                    if (parents[i].node_ === node_) {\n\t                        state.circular = parents[i];\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                state.isLeaf = true;\n\t                state.keys = null;\n\t            }\n\t            \n\t            state.notLeaf = !state.isLeaf;\n\t            state.notRoot = !state.isRoot;\n\t        }\n\t        \n\t        updateState();\n\t        \n\t        // use return values to update if defined\n\t        var ret = cb.call(state, state.node);\n\t        if (ret !== undefined && state.update) state.update(ret);\n\t        \n\t        if (modifiers.before) modifiers.before.call(state, state.node);\n\t        \n\t        if (!keepGoing) return state;\n\t        \n\t        if (typeof state.node == 'object'\n\t        && state.node !== null && !state.circular) {\n\t            parents.push(state);\n\t            \n\t            updateState();\n\t            \n\t            forEach(state.keys, function (key, i) {\n\t                path.push(key);\n\t                \n\t                if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n\t                \n\t                var child = walker(state.node[key]);\n\t                if (immutable && hasOwnProperty.call(state.node, key)) {\n\t                    state.node[key] = child.node;\n\t                }\n\t                \n\t                child.isLast = i == state.keys.length - 1;\n\t                child.isFirst = i == 0;\n\t                \n\t                if (modifiers.post) modifiers.post.call(state, child);\n\t                \n\t                path.pop();\n\t            });\n\t            parents.pop();\n\t        }\n\t        \n\t        if (modifiers.after) modifiers.after.call(state, state.node);\n\t        \n\t        return state;\n\t    })(root).node;\n\t}\n\n\tfunction copy (src) {\n\t    if (typeof src === 'object' && src !== null) {\n\t        var dst;\n\t        \n\t        if (isArray(src)) {\n\t            dst = [];\n\t        }\n\t        else if (isDate(src)) {\n\t            dst = new Date(src.getTime ? src.getTime() : src);\n\t        }\n\t        else if (isRegExp(src)) {\n\t            dst = new RegExp(src);\n\t        }\n\t        else if (isError(src)) {\n\t            dst = { message: src.message };\n\t        }\n\t        else if (isBoolean(src)) {\n\t            dst = new Boolean(src);\n\t        }\n\t        else if (isNumber(src)) {\n\t            dst = new Number(src);\n\t        }\n\t        else if (isString(src)) {\n\t            dst = new String(src);\n\t        }\n\t        else if (Object.create && Object.getPrototypeOf) {\n\t            dst = Object.create(Object.getPrototypeOf(src));\n\t        }\n\t        else if (src.constructor === Object) {\n\t            dst = {};\n\t        }\n\t        else {\n\t            var proto =\n\t                (src.constructor && src.constructor.prototype)\n\t                || src.__proto__\n\t                || {}\n\t            ;\n\t            var T = function () {};\n\t            T.prototype = proto;\n\t            dst = new T;\n\t        }\n\t        \n\t        forEach(objectKeys(src), function (key) {\n\t            dst[key] = src[key];\n\t        });\n\t        return dst;\n\t    }\n\t    else return src;\n\t}\n\n\tvar objectKeys = Object.keys || function keys (obj) {\n\t    var res = [];\n\t    for (var key in obj) res.push(key);\n\t    return res;\n\t};\n\n\tfunction toS (obj) { return Object.prototype.toString.call(obj) }\n\tfunction isDate (obj) { return toS(obj) === '[object Date]' }\n\tfunction isRegExp (obj) { return toS(obj) === '[object RegExp]' }\n\tfunction isError (obj) { return toS(obj) === '[object Error]' }\n\tfunction isBoolean (obj) { return toS(obj) === '[object Boolean]' }\n\tfunction isNumber (obj) { return toS(obj) === '[object Number]' }\n\tfunction isString (obj) { return toS(obj) === '[object String]' }\n\n\tvar isArray = Array.isArray || function isArray (xs) {\n\t    return Object.prototype.toString.call(xs) === '[object Array]';\n\t};\n\n\tvar forEach = function (xs, fn) {\n\t    if (xs.forEach) return xs.forEach(fn)\n\t    else for (var i = 0; i < xs.length; i++) {\n\t        fn(xs[i], i, xs);\n\t    }\n\t};\n\n\tforEach(objectKeys(Traverse.prototype), function (key) {\n\t    traverse[key] = function (obj) {\n\t        var args = [].slice.call(arguments, 1);\n\t        var t = new Traverse(obj);\n\t        return t[key].apply(t, args);\n\t    };\n\t});\n\n\tvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n\t    return key in obj;\n\t};\n\t});\n\n\tvar classCallCheck = function (instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError(\"Cannot call a class as a function\");\n\t  }\n\t};\n\n\tvar createClass = function () {\n\t  function defineProperties(target, props) {\n\t    for (var i = 0; i < props.length; i++) {\n\t      var descriptor = props[i];\n\t      descriptor.enumerable = descriptor.enumerable || false;\n\t      descriptor.configurable = true;\n\t      if (\"value\" in descriptor) descriptor.writable = true;\n\t      Object.defineProperty(target, descriptor.key, descriptor);\n\t    }\n\t  }\n\n\t  return function (Constructor, protoProps, staticProps) {\n\t    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t    if (staticProps) defineProperties(Constructor, staticProps);\n\t    return Constructor;\n\t  };\n\t}();\n\n\t/**\n\t* The CodecUtils class gather some static methods that can be useful while\n\t* encodeing/decoding data.\n\t* CodecUtils does not have a constructor, don't try to instanciate it.\n\t*/\n\n\tvar CodecUtils = function () {\n\t  function CodecUtils() {\n\t    classCallCheck(this, CodecUtils);\n\t  }\n\n\t  createClass(CodecUtils, null, [{\n\t    key: \"isPlatformLittleEndian\",\n\n\n\t    /**\n\t    * Get whether or not the platform is using little endian.\n\t    * @return {Boolen } true if the platform is little endian, false if big endian\n\t    */\n\t    value: function isPlatformLittleEndian() {\n\t      var a = new Uint32Array([0x12345678]);\n\t      var b = new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n\t      return b[0] != 0x12;\n\t    }\n\n\t    /**\n\t    * convert an ArrayBuffer into a unicode string (2 bytes for each char)\n\t    * Note: this method was kindly borrowed from Google Closure Compiler:\n\t    * https://github.com/google/closure-library/blob/master/closure/goog/crypt/crypt.js\n\t    * @param {ArrayBuffer} buf - input ArrayBuffer\n\t    * @return {String} a string compatible with Unicode characters\n\t    */\n\n\t  }, {\n\t    key: \"arrayBufferToUnicode\",\n\t    value: function arrayBufferToUnicode(buff) {\n\t      var buffUint8 = new Uint8Array(buff);\n\t      var out = [],\n\t          pos = 0,\n\t          c = 0;\n\n\t      while (pos < buffUint8.length) {\n\t        var c1 = buffUint8[pos++];\n\t        if (c1 < 128) {\n\t          if (c1 < 32 && c1 != 10 && c1 != 13 && c1 != 9 || c1 == 127) {\n\t            console.warn(\"Invalid string: non-printable characters\");\n\t            return null;\n\t          }\n\t          out[c++] = String.fromCharCode(c1);\n\t        } else if (c1 > 191 && c1 < 224) {\n\t          var c2 = buffUint8[pos++];\n\t          out[c++] = String.fromCharCode((c1 & 31) << 6 | c2 & 63);\n\t        } else if (c1 > 239 && c1 < 365) {\n\t          // Surrogate Pair\n\t          var c2 = buffUint8[pos++];\n\t          var c3 = buffUint8[pos++];\n\t          var c4 = buffUint8[pos++];\n\t          var u = ((c1 & 7) << 18 | (c2 & 63) << 12 | (c3 & 63) << 6 | c4 & 63) - 0x10000;\n\t          out[c++] = String.fromCharCode(0xD800 + (u >> 10));\n\t          out[c++] = String.fromCharCode(0xDC00 + (u & 1023));\n\t        } else {\n\t          var c2 = buffUint8[pos++];\n\t          var c3 = buffUint8[pos++];\n\t          var code = (c1 & 15) << 12 | (c2 & 63) << 6 | c3 & 63;\n\t          if (code === 0xFFFD) {\n\t            console.warn(\"Invalid string: a REPLACEMENT CHARACTER was spotted\");\n\t            return null;\n\t          }\n\t          out[c++] = String.fromCharCode(code);\n\t        }\n\t      }\n\t      return out.join('');\n\t    }\n\t  }, {\n\t    key: \"unicodeToArrayBuffer\",\n\n\n\t    /**\n\t    * convert a unicode string into an ArrayBuffer\n\t    * Note that the str is a regular string but it will be encoded with\n\t    * 2 bytes per char instead of 1 ( ASCII uses 1 byte/char ).\n\t    * Note: this method was kindly borrowed from Google Closure Compiler:\n\t    * https://github.com/google/closure-library/blob/master/closure/goog/crypt/crypt.js\n\t    * @param {String} str - string to encode\n\t    * @return {ArrayBuffer} the output ArrayBuffer\n\t    */\n\t    value: function unicodeToArrayBuffer(str) {\n\t      var out = [],\n\t          p = 0;\n\t      for (var i = 0; i < str.length; i++) {\n\t        var c = str.charCodeAt(i);\n\t        if (c < 128) {\n\t          out[p++] = c;\n\t        } else if (c < 2048) {\n\t          out[p++] = c >> 6 | 192;\n\t          out[p++] = c & 63 | 128;\n\t        } else if ((c & 0xFC00) == 0xD800 && i + 1 < str.length && (str.charCodeAt(i + 1) & 0xFC00) == 0xDC00) {\n\t          // Surrogate Pair\n\t          c = 0x10000 + ((c & 0x03FF) << 10) + (str.charCodeAt(++i) & 0x03FF);\n\t          out[p++] = c >> 18 | 240;\n\t          out[p++] = c >> 12 & 63 | 128;\n\t          out[p++] = c >> 6 & 63 | 128;\n\t          out[p++] = c & 63 | 128;\n\t        } else {\n\t          out[p++] = c >> 12 | 224;\n\t          out[p++] = c >> 6 & 63 | 128;\n\t          out[p++] = c & 63 | 128;\n\t        }\n\t      }\n\n\t      // make a buffer out of the array\n\t      return new Uint8Array(out).buffer;\n\t    }\n\t  }, {\n\t    key: \"arrayBufferToString8\",\n\n\n\t    /**\n\t    * Convert an ArrayBuffer into a ASCII string (1 byte for each char)\n\t    * @param {ArrayBuffer} buf - buffer to convert into ASCII string\n\t    * @return {String} the output string\n\t    */\n\t    value: function arrayBufferToString8(buf) {\n\t      return String.fromCharCode.apply(null, new Uint8Array(buf));\n\t    }\n\n\t    /**\n\t    * Convert a ASCII string into an ArrayBuffer.\n\t    * Note that the str is a regular string, it will be encoded with 1 byte per char\n\t    * @param {String} str - string to encode\n\t    * @return {ArrayBuffer}\n\t    */\n\n\t  }, {\n\t    key: \"string8ToArrayBuffer\",\n\t    value: function string8ToArrayBuffer(str) {\n\t      var buf = new ArrayBuffer(str.length);\n\t      var bufView = new Uint8Array(buf);\n\t      for (var i = 0; i < str.length; i++) {\n\t        bufView[i] = str.charCodeAt(i);\n\t      }\n\t      return buf;\n\t    }\n\n\t    /**\n\t    * Write a ASCII string into a buffer\n\t    * @param {String} str - a string that contains only ASCII characters\n\t    * @param {ArrayBuffer} buffer - the buffer where to write the string\n\t    * @param {Number} byteOffset - the offset to apply, in number of bytes\n\t    */\n\n\t  }, {\n\t    key: \"setString8InBuffer\",\n\t    value: function setString8InBuffer(str, buffer) {\n\t      var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n\t      if (byteOffset < 0) {\n\t        console.warn(\"The byte offset cannot be negative.\");\n\t        return;\n\t      }\n\n\t      if (!buffer || !(buffer instanceof ArrayBuffer)) {\n\t        console.warn(\"The buffer must be a valid ArrayBuffer.\");\n\t        return;\n\t      }\n\n\t      if (str.length + byteOffset > buffer.byteLength) {\n\t        console.warn(\"The string is too long to be writen in this buffer.\");\n\t        return;\n\t      }\n\n\t      var bufView = new Uint8Array(buffer);\n\n\t      for (var i = 0; i < str.length; i++) {\n\t        bufView[i + byteOffset] = str.charCodeAt(i);\n\t      }\n\t    }\n\n\t    /**\n\t    * Extract an ASCII string from an ArrayBuffer\n\t    * @param {ArrayBuffer} buffer - the buffer\n\t    * @param {Number} strLength - number of chars in the string we want\n\t    * @param {Number} byteOffset - the offset in number of bytes\n\t    * @return {String} the string, or null in case of error\n\t    */\n\n\t  }, {\n\t    key: \"getString8FromBuffer\",\n\t    value: function getString8FromBuffer(buffer, strLength) {\n\t      var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n\t      if (byteOffset < 0) {\n\t        console.warn(\"The byte offset cannot be negative.\");\n\t        return null;\n\t      }\n\n\t      if (!buffer || !(buffer instanceof ArrayBuffer)) {\n\t        console.warn(\"The buffer must be a valid ArrayBuffer.\");\n\t        return null;\n\t      }\n\n\t      if (strLength + byteOffset > buffer.byteLength) {\n\t        console.warn(\"The string is too long to be writen in this buffer.\");\n\t        return null;\n\t      }\n\n\t      return String.fromCharCode.apply(null, new Uint8Array(buffer, byteOffset, strLength));\n\t    }\n\n\t    /**\n\t    * Serializes a JS object into an ArrayBuffer.\n\t    * This is using a unicode JSON intermediate step.\n\t    * @param {Object} obj - an object that does not have cyclic structure\n\t    * @return {ArrayBuffer} the serialized output\n\t    */\n\n\t  }, {\n\t    key: \"objectToArrayBuffer\",\n\t    value: function objectToArrayBuffer(obj) {\n\t      var buff = null;\n\t      var objCleanClone = CodecUtils.makeSerializeFriendly(obj);\n\n\t      try {\n\t        var strObj = JSON.stringify(objCleanClone);\n\t        buff = CodecUtils.unicodeToArrayBuffer(strObj);\n\t      } catch (e) {\n\t        console.warn(e);\n\t      }\n\n\t      return buff;\n\t    }\n\n\t    /**\n\t    * Convert an ArrayBuffer into a JS Object. This uses an intermediate unicode JSON string.\n\t    * Of course, this buffer has to come from a serialized object.\n\t    * @param {ArrayBuffer} buff - the ArrayBuffer that hides some object\n\t    * @return {Object} the deserialized object\n\t    */\n\n\t  }, {\n\t    key: \"ArrayBufferToObject\",\n\t    value: function ArrayBufferToObject(buff) {\n\t      var obj = null;\n\n\t      try {\n\t        var strObj = CodecUtils.arrayBufferToUnicode(buff);\n\t        obj = JSON.parse(strObj);\n\t      } catch (e) {\n\t        console.warn(e);\n\t      }\n\n\t      return obj;\n\t    }\n\n\t    /**\n\t    * Get if wether of not the arg is a typed array\n\t    * @param {Object} obj - possibly a typed array, or maybe not\n\t    * @return {Boolean} true if obj is a typed array\n\t    */\n\n\t  }, {\n\t    key: \"isTypedArray\",\n\t    value: function isTypedArray(obj) {\n\t      return obj instanceof Int8Array || obj instanceof Uint8Array || obj instanceof Uint8ClampedArray || obj instanceof Int16Array || obj instanceof Uint16Array || obj instanceof Int32Array || obj instanceof Uint32Array || obj instanceof Float32Array || obj instanceof Float64Array;\n\t    }\n\n\t    /**\n\t    * Merge some ArrayBuffes in a single one\n\t    * @param {Array} arrayOfBuffers - some ArrayBuffers\n\t    * @return {ArrayBuffer} the larger merged buffer\n\t    */\n\n\t  }, {\n\t    key: \"mergeBuffers\",\n\t    value: function mergeBuffers(arrayOfBuffers) {\n\t      var totalByteSize = 0;\n\n\t      for (var i = 0; i < arrayOfBuffers.length; i++) {\n\t        totalByteSize += arrayOfBuffers[i].byteLength;\n\t      }\n\n\t      var concatArray = new Uint8Array(totalByteSize);\n\n\t      var offset = 0;\n\t      for (var i = 0; i < arrayOfBuffers.length; i++) {\n\t        concatArray.set(new Uint8Array(arrayOfBuffers[i]), offset);\n\t        offset += arrayOfBuffers[i].byteLength;\n\t      }\n\n\t      return concatArray.buffer;\n\t    }\n\n\t    /**\n\t    * In a browser, the global object is `window` while in Node, it's `GLOBAL`.\n\t    * This method return the one that is relevant to the execution context.\n\t    * @return {Object} the global object\n\t    */\n\n\t  }, {\n\t    key: \"getGlobalObject\",\n\t    value: function getGlobalObject() {\n\t      var constructorHost = null;\n\n\t      try {\n\t        constructorHost = window; // in a web browser\n\t      } catch (e) {\n\t        try {\n\t          constructorHost = GLOBAL; // in node\n\t        } catch (e) {\n\t          console.warn(\"You are not in a Javascript environment?? Weird.\");\n\t          return null;\n\t        }\n\t      }\n\t      return constructorHost;\n\t    }\n\n\t    /**\n\t    * Extract a typed array from an arbitrary buffer, with an arbitrary offset\n\t    * @param {ArrayBuffer} buffer - the buffer from which we extract data\n\t    * @param {Number} byteOffset - offset from the begining of buffer\n\t    * @param {Function} arrayType - function object, actually the constructor of the output array\n\t    * @param {Number} numberOfElements - nb of elem we want to fetch from the buffer\n\t    * @return {TypedArray} output of type given by arg arrayType - this is a copy, not a view\n\t    */\n\n\t  }, {\n\t    key: \"extractTypedArray\",\n\t    value: function extractTypedArray(buffer, byteOffset, arrayType, numberOfElements) {\n\t      if (!buffer) {\n\t        console.warn(\"Input Buffer is null.\");\n\t        return null;\n\t      }\n\n\t      if (!(buffer instanceof ArrayBuffer)) {\n\t        console.warn(\"Buffer must be of type ArrayBuffer\");\n\t        return null;\n\t      }\n\n\t      if (numberOfElements <= 0) {\n\t        console.warn(\"The number of elements to fetch must be greater than 0\");\n\t        return null;\n\t      }\n\n\t      if (byteOffset < 0) {\n\t        console.warn(\"The byte offset must be possitive or 0\");\n\t        return null;\n\t      }\n\n\t      if (byteOffset >= buffer.byteLength) {\n\t        console.warn(\"The offset cannot be larger than the size of the buffer.\");\n\t        return null;\n\t      }\n\n\t      if (arrayType instanceof Function && !(\"BYTES_PER_ELEMENT\" in arrayType)) {\n\t        console.warn(\"ArrayType must be a typed array constructor function.\");\n\t        return null;\n\t      }\n\n\t      if (arrayType.BYTES_PER_ELEMENT * numberOfElements + byteOffset > buffer.byteLength) {\n\t        console.warn(\"The requested number of elements is too large for this buffer\");\n\t        return;\n\t      }\n\n\t      var slicedBuff = buffer.slice(byteOffset, byteOffset + numberOfElements * arrayType.BYTES_PER_ELEMENT);\n\t      return new arrayType(slicedBuff);\n\t    }\n\n\t    /**\n\t    * Get some info about the given TypedArray\n\t    * @param {TypedArray} typedArray - one of the typed array\n\t    * @return {Object} in form of {type: String, signed: Boolean, bytesPerElements: Number, byteLength: Number, length: Number}\n\t    */\n\n\t  }, {\n\t    key: \"getTypedArrayInfo\",\n\t    value: function getTypedArrayInfo(typedArray) {\n\t      var type = null;\n\t      var signed = false;\n\n\t      if (typedArray instanceof Int8Array) {\n\t        type = \"int\";\n\t        signed = false;\n\t      } else if (typedArray instanceof Uint8Array) {\n\t        type = \"int\";\n\t        signed = true;\n\t      } else if (typedArray instanceof Uint8ClampedArray) {\n\t        type = \"int\";\n\t        signed = true;\n\t      } else if (typedArray instanceof Int16Array) {\n\t        type = \"int\";\n\t        signed = false;\n\t      } else if (typedArray instanceof Uint16Array) {\n\t        type = \"int\";\n\t        signed = true;\n\t      } else if (typedArray instanceof Int32Array) {\n\t        type = \"int\";\n\t        signed = false;\n\t      } else if (typedArray instanceof Uint32Array) {\n\t        type = \"int\";\n\t        signed = true;\n\t      } else if (typedArray instanceof Float32Array) {\n\t        type = \"float\";\n\t        signed = false;\n\t      } else if (typedArray instanceof Float64Array) {\n\t        type = \"float\";\n\t        signed = false;\n\t      }\n\n\t      return {\n\t        type: type,\n\t        signed: signed,\n\t        bytesPerElements: typedArray.BYTES_PER_ELEMENT,\n\t        byteLength: typedArray.byteLength,\n\t        length: typedArray.length\n\t      };\n\t    }\n\n\t    /**\n\t    * Counts the number of typed array obj has as attributes\n\t    * @param {Object} obj - an Object\n\t    * @return {Number} the number of typed array\n\t    */\n\n\t  }, {\n\t    key: \"howManyTypedArrayAttributes\",\n\t    value: function howManyTypedArrayAttributes(obj) {\n\t      var typArrCounter = 0;\n\t      traverse_1(obj).forEach(function (x) {\n\t        typArrCounter += CodecUtils.isTypedArray(x);\n\t      });\n\t      return typArrCounter;\n\t    }\n\n\t    /**\n\t    * Check if the given object contains any circular reference.\n\t    * (Circular ref are non serilizable easily, we want to spot them)\n\t    * @param {Object} obj - An object to check\n\t    * @return {Boolean} true if obj contains circular refm false if not\n\t    */\n\n\t  }, {\n\t    key: \"hasCircularReference\",\n\t    value: function hasCircularReference(obj) {\n\t      var hasCircular = false;\n\t      traverse_1(obj).forEach(function (x) {\n\t        if (this.circular) {\n\t          hasCircular = true;\n\t        }\n\t      });\n\t      return hasCircular;\n\t    }\n\n\t    /**\n\t    * Remove circular dependencies from an object and return a circularRef-free version\n\t    * of the object (does not change the original obj), of null if no circular ref was found\n\t    * @param {Object} obj - An object to check\n\t    * @return {Object} a circular-ref free object copy if any was found, or null if no circ was found\n\t    */\n\n\t  }, {\n\t    key: \"removeCircularReference\",\n\t    value: function removeCircularReference(obj) {\n\t      var hasCircular = false;\n\t      var noCircRefObj = traverse_1(obj).map(function (x) {\n\t        if (this.circular) {\n\t          this.remove();\n\t          hasCircular = true;\n\t        }\n\t      });\n\t      return hasCircular ? noCircRefObj : null;\n\t    }\n\n\t    /**\n\t    * Clone the object and replace the typed array attributes by regular Arrays.\n\t    * @param {Object} obj - an object to alter\n\t    * @return {Object} the clone if ant typed array were changed, or null if was obj didnt contain any typed array.\n\t    */\n\n\t  }, {\n\t    key: \"replaceTypedArrayAttributesByArrays\",\n\t    value: function replaceTypedArrayAttributesByArrays(obj) {\n\t      var hasTypedArray = false;\n\n\t      var noTypedArrClone = traverse_1(obj).map(function (x) {\n\t        if (CodecUtils.isTypedArray(x)) {\n\t          // here, we cannot call .length directly because traverse.map already serialized\n\t          // typed arrays into regular objects\n\t          var origSize = Object.keys(x).length;\n\t          var untypedArray = new Array(origSize);\n\n\t          for (var i = 0; i < origSize; i++) {\n\t            untypedArray[i] = x[i];\n\t          }\n\t          this.update(untypedArray);\n\t          hasTypedArray = true;\n\t        }\n\t      });\n\t      return hasTypedArray ? noTypedArrClone : null;\n\t    }\n\n\t    /**\n\t    * Creates a clone, does not alter the original object.\n\t    * Remove circular dependencies and replace typed arrays by regular arrays.\n\t    * Both will make the serialization possible and more reliable.\n\t    * @param {Object} obj - the object to make serialization friendly\n\t    * @return {Object} a clean clone, or null if nothing was done\n\t    */\n\n\t  }, {\n\t    key: \"makeSerializeFriendly\",\n\t    value: function makeSerializeFriendly(obj) {\n\t      var newObj = obj;\n\t      var noCircular = CodecUtils.removeCircularReference(newObj);\n\n\t      if (noCircular) newObj = noCircular;\n\n\t      var noTypedArr = CodecUtils.replaceTypedArrayAttributesByArrays(newObj);\n\n\t      if (noTypedArr) newObj = noTypedArr;\n\n\t      return newObj;\n\t    }\n\n\t    /**\n\t    * Check if a string is valid or not. A string is considered as invalid if it has\n\t    * unicode \"REPLACEMENT CHARACTER\" or non-printable ASCII characters.\n\t    * @param {String} str - string to test\n\t    * @param {Boolean} forceAll - test the whole string instead of a sample of 1000 charaters\n\t    * @return {Boolean} true is the string is valid, false if invalid.\n\t    */\n\n\t  }, {\n\t    key: \"isValidString\",\n\t    value: function isValidString(str) {\n\t      var forceAll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\t      var strLen = str.length;\n\t      var nbSamples = forceAll ? strLen : Math.min(1000, strLen); //  a sample of 1000 should be enough\n\t      var flagChar = 0xFFFD;\n\t      var redFlags = 0;\n\t      for (var i = 0; i < nbSamples; i++) {\n\t        var code = str.charCodeAt(Math.floor(Math.random() * nbSamples));\n\t        if (code === flagChar || code < 32 && code != 10 && code != 13 && code != 9 || code == 127) {\n\t          redFlags++;\n\t        }\n\t      }\n\t      return !(redFlags > 0);\n\t    }\n\t  }]);\n\t  return CodecUtils;\n\t}(); /* END of class CodecUtils */\n\n\texports.CodecUtils = CodecUtils;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=codecutils.umd.js.map\n"," /*\n* Author    Jonathan Lurie - http://me.jonahanlurie.fr\n* License   MIT\n* Link      https://github.com/jonathanlurie/edfdecoder\n* Lab       MCIN - http://mcin.ca/ - Montreal Neurological Institute\n*/\n\n\n/**\n* An instance of Edf is usually given as output of an EdfDecoder. It provides an\n* interface with a lot of helper function to query information that were extracted\n* from en *.edf* file, such as header information, getting a signal at a given record\n* or concatenating records of a given signal.\n*\n* Keep in mind that the number of records in an edf file can be decoded by arbitrary\n* measures, or it can be 1 second per records, etc.\n*\n*/\nclass Edf {\n  constructor( header, rawSignals, physicalSignals ){\n    this._header = header;\n    this._physicalSignals = physicalSignals;\n    this._rawSignals = rawSignals;\n  }\n\n  /**\n  * Get the duration in second of a single record\n  * @return {Number} duration\n  */\n  getRecordDuration(){\n    return this._header.durationDataRecordsSec;\n  }\n\n\n  /**\n  * Get the ID of the recording\n  * @return {String} the ID\n  */\n  getRecordingID(){\n    return this._header.localRecordingId;\n  }\n\n\n  /**\n  * get the number of records per signal.\n  * Note: most of the time, records from the same signal are contiguous in time.\n  * @return {Number} the number of records\n  */\n  getNumberOfRecords(){\n    return this._header.nbDataRecords;\n  }\n\n\n  /**\n  * get the number of signals.\n  * Note: a signal can have more than one record\n  * @return {Number} the number of signals\n  */\n  getNumberOfSignals(){\n    return this._header.nbSignals;\n  }\n\n\n  /**\n  * Get the patien ID\n  * @return {String} ID\n  */\n  getPatientID(){\n    return this._header.patientId;\n  }\n\n\n  /**\n  * Get the date and the time at which the recording has started\n  * @return {Date} the date\n  */\n  getRecordingStartDate(){\n    return this._header.recordingDate;\n  }\n\n\n  /**\n  * Get the value of the reserved field, global (from header) or specific to a signal.\n  * Notice: reserved are rarely used.\n  * @param {Number} index - if not specified, get the header's reserved field. If [0, nbSignals[ get the reserved field specific for the given signal\n  * @return {String} the data of the reserved field.\n  */\n  getReservedField( index=-1 ){\n    if( index === -1 ){\n      return this._header.reserved;\n    }else{\n      if( index >= 0 && index < this._header.signalInfo.length ){\n        return this._header.signalInfo[index].reserved;\n      }\n    }\n\n    return null;\n  }\n\n\n  /**\n  * Get the digital maximum for a given signal index\n  * @param {Number} index - index of the signal\n  * @return {Number}\n  */\n  getSignalDigitalMax( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].digitalMaximum;\n  }\n\n\n  /**\n  * Get the digital minimum for a given signal index\n  * @param {Number} index - index of the signal\n  * @return {Number}\n  */\n  getSignalDigitalMin( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].digitalMinimum;\n  }\n\n\n  /**\n  * Get the physical minimum for a given signal index\n  * @param {Number} index - index of the signal\n  * @return {Number}\n  */\n  getSignalPhysicalMin( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].physicalMinimum;\n  }\n\n\n  /**\n  * Get the physical maximum for a given signal index\n  * @param {Number} index - index of the signal\n  * @return {Number}\n  */\n  getSignalPhysicalMax( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].physicalMaximum;\n  }\n\n\n  /**\n  * Get the label for a given signal index\n  * @param {Number} index - index of the signal\n  * @return {String}\n  */\n  getSignalLabel( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].label;\n  }\n\n\n  /**\n  * Get the number of samples per record for a given signal index\n  * @param {Number} index - index of the signal\n  * @return {Number}\n  */\n  getSignalNumberOfSamplesPerRecord( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].nbOfSamples;\n  }\n\n\n  /**\n  * Get the unit (dimension label) used for a given signal index.\n  * E.g. this can be 'uV' when the signal is an EEG\n  * @param {Number} index - index of the signal\n  * @return {String} the unit name\n  */\n  getSignalPhysicalUnit( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].physicalDimension;\n  }\n\n\n  /**\n  * Get the unit prefiltering info for a given signal index.\n  * @param {Number} index - index of the signal\n  * @return {String} the prefiltering info\n  */\n  getSignalPrefiltering( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].prefiltering;\n  }\n\n\n  /**\n  * Get the transducer type info for a given signal index.\n  * @param {Number} index - index of the signal\n  * @return {String} the transducer type info\n  */\n  getSignalTransducerType( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].transducerType;\n  }\n\n\n  /**\n  * Get the sampling frequency in Hz of a given signal\n  * @param {Number} index - index of the signal\n  * @return {Number} frequency in Hz\n  */\n  getSignalSamplingFrequency( index ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    return this._header.signalInfo[index].nbOfSamples / this._header.durationDataRecordsSec;\n  }\n\n  /**\n  * Get the physical (scaled) signal at a given index and record\n  * @param {Number} index - index of the signal\n  * @param {Number} record - index of the record\n  * @return {Float32Array} the physical signal in Float32\n  */\n  getPhysicalSignal( index, record ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    if( record<0 && record>=this._physicalSignals[index].length ){\n      console.warn(\"Record index is out of range\");\n      return null;\n    }\n\n    return this._physicalSignals[index][record];\n  }\n\n\n  /**\n  * Get the raw (digital) signal at a given index and record\n  * @param {Number} index - index of the signal\n  * @param {Number} record - index of the record\n  * @return {Int16Array} the physical signal in Int16\n  */\n  getRawSignal( index, record ){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    if( record<0 && record>=this._rawSignals[index].length ){\n      console.warn(\"Record index is out of range\");\n      return null;\n    }\n\n    return this._rawSignals[index][record];\n  }\n\n\n\n  /**\n  * Get concatenated contiguous records of a given signal, the index of the\n  * first record and the number of records to concat.\n  * Notice: this allocates a new buffer of an extented size.\n  * @param {Number} index - index of the signal\n  * @param {Number} recordStart - index of the record to start with\n  * @param {Number} howMany - Number of records to concatenate\n  * @return {Float32Array} the physical signal in Float32\n  */\n  getPhysicalSignalConcatRecords(index, recordStart=-1, howMany=-1){\n    if( index < 0 || index >= this._header.signalInfo.length ){\n      console.warn(\"Signal index is out of range\");\n      return null;\n    }\n\n    if( recordStart<0 && recordStart>=this._physicalSignals[index].length ){\n      console.warn(\"The index recordStart is out of range\");\n      return null;\n    }\n\n    if(recordStart === -1){\n      recordStart = 0;\n    }\n\n    if(howMany === -1){\n      howMany = this._physicalSignals[index].length - recordStart;\n    }else{\n      // we still want to check if what the user put is not out of bound\n      if( recordStart + howMany > this._physicalSignals[index].length ){\n        console.warn(\"The number of requested records is too large. Forcing only to available records.\");\n        howMany = this._physicalSignals[index].length - recordStart; \n      }\n\n    }\n\n    // index of the last one to consider\n    var recordEnd = recordStart + howMany - 1;\n\n    if( recordEnd<0 && recordEnd>=this._physicalSignals[index].length ){\n      console.warn(\"Too many records to concatenate, this goes out of range.\");\n      return null;\n    }\n\n    var totalSize = 0;\n    for(var i=recordStart; i<recordStart + howMany; i++){\n      totalSize += this._physicalSignals[index][i].length;\n    }\n\n    var concatSignal = new Float32Array( totalSize );\n    var offset = 0;\n\n    for(var i=recordStart; i<recordStart + howMany; i++){\n      concatSignal.set( this._physicalSignals[index][i], offset );\n      offset += this._physicalSignals[index][i].length;\n    }\n\n    return concatSignal;\n  }\n\n\n} /* END of class Edf */\n\nexport { Edf };\n","/*\n* Author    Jonathan Lurie - http://me.jonahanlurie.fr\n* License   MIT\n* Link      https://github.com/jonathanlurie/edfdecoder\n* Lab       MCIN - http://mcin.ca/ - Montreal Neurological Institute\n*/\n\n\nimport codecutils from 'codecutils';\nimport { Edf } from './Edf.js';\n\n\n/**\n* An instance of EdfDecoder is used to decode an EDF file, or rather a buffer extracted from a\n* EDF file. To specify the input, use the method `.setInput(buf)` , then launch the decoding\n* with the method `.decode()` and finally get the content as an object with `.getOutput()`.\n* If the output is `null`, then the parser was not able to decode the file.\n*/\nclass EdfDecoder {\n\n  /**\n   * Create a EdfDecoder.\n   */\n  constructor( ) {\n    this._inputBuffer = null;\n    this._output = null;\n  }\n\n\n  /**\n  * Set the buffer (most likey from a file) that contains some EDF data\n  * @param {ArrayBuffer} buff - buffer from a file\n  */\n  setInput( buff ){\n    this._output = null;\n    this._inputBuffer = buff;\n  }\n\n\n  /**\n  * Decode the EDF file buffer set as input. This is done in two steps, first the header and then the data.\n  */\n  decode(){\n    try{\n      var headerInfo = this._decodeHeader();\n      this._decodeData( headerInfo.offset, headerInfo.header );\n    }catch(e){\n      console.warn( e );\n    }\n\n\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Decodes the header or the file\n  */\n  _decodeHeader(){\n    if(! this._inputBuffer ){\n      console.warn(\"A input buffer must be specified.\");\n      return;\n    }\n\n    var header = {};\n    var offset = 0;\n\n    // 8 ascii : version of this data format (0)\n    header.dataFormat = codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 8, offset).trim();\n    offset += 8;\n\n    // 80 ascii : local patient identification\n    header.patientId = codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 80, offset).trim();\n    offset += 80;\n\n    // 80 ascii : local recording identification\n    header.localRecordingId = codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 80, offset).trim();\n    offset += 80;\n\n    // 8 ascii : startdate of recording (dd.mm.yy)\n    var recordingStartDate = codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 8, offset).trim();\n    offset += 8;\n\n    // 8 ascii : starttime of recording (hh.mm.ss)\n    var recordingStartTime = codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 8, offset).trim();\n    offset += 8;\n\n    var date = recordingStartDate.split(\".\");\n    var time = recordingStartTime.split(\".\");\n    header.recordingDate = new Date( date[2], date[1], date[0], time[0], time[1], time[2], 0 );\n\n    // 8 ascii : number of bytes in header record\n    header.nbBytesHeaderRecord = parseInt( codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 8, offset).trim() );\n    offset += 8;\n\n    // 44 ascii : reserved\n    header.reserved = codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 44, offset);\n    offset += 44;\n\n    // 8 ascii : number of data records (-1 if unknown)\n    header.nbDataRecords = parseInt( codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 8, offset).trim() );\n    offset += 8;\n\n    // 8 ascii : duration of a data record, in seconds\n    header.durationDataRecordsSec = parseInt( codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 8, offset).trim() );\n    offset += 8;\n\n    // 4 ascii : number of signals (ns) in data record\n    header.nbSignals = parseInt( codecutils.CodecUtils.getString8FromBuffer( this._inputBuffer , 4, offset).trim() );\n    offset += 4;\n\n    // the following fields occurs ns time in a row each\n    var that = this;\n    function getAllSections( sizeOfEachThing ){\n      var allThings = [];\n      for(var i=0; i<header.nbSignals; i++){\n        allThings.push( codecutils.CodecUtils.getString8FromBuffer( that._inputBuffer , sizeOfEachThing, offset ).trim() );\n        offset += sizeOfEachThing;\n      }\n      return allThings;\n    }\n\n    var signalInfoArrays = {\n      // ns * 16 ascii : ns * label (e.g. EEG Fpz-Cz or Body temp)\n      label: getAllSections( 16 ),\n      // ns * 80 ascii : ns * transducer type (e.g. AgAgCl electrode)\n      transducerType: getAllSections( 80 ),\n      // ns * 8 ascii : ns * physical dimension (e.g. uV or degreeC)\n      physicalDimension: getAllSections( 8 ),\n      // ns * 8 ascii : ns * physical minimum (e.g. -500 or 34)\n      physicalMinimum: getAllSections( 8 ),\n      // ns * 8 ascii : ns * physical maximum (e.g. 500 or 40)\n      physicalMaximum: getAllSections( 8 ),\n      // ns * 8 ascii : ns * digital minimum (e.g. -2048)\n      digitalMinimum: getAllSections( 8 ),\n      // ns * 8 ascii : ns * digital maximum (e.g. 2047)\n      digitalMaximum: getAllSections( 8 ),\n      // ns * 80 ascii : ns * prefiltering (e.g. HP:0.1Hz LP:75Hz)\n      prefiltering: getAllSections( 80 ),\n      // ns * 8 ascii : ns * nr of samples in each data record\n      nbOfSamples: getAllSections( 8 ),\n      // ns * 32 ascii : ns * reserved\n      reserved: getAllSections( 32 )\n    }\n\n    var signalInfo = [];\n    header.signalInfo = signalInfo;\n    for(var i=0; i<header.nbSignals; i++){\n      signalInfo.push({\n        label: signalInfoArrays.label[i],\n        transducerType: signalInfoArrays.transducerType[i],\n        physicalDimension: signalInfoArrays.physicalDimension[i],\n        physicalMinimum: parseFloat( signalInfoArrays.physicalMinimum[i] ),\n        physicalMaximum: parseFloat( signalInfoArrays.physicalMaximum[i] ),\n        digitalMinimum: parseInt( signalInfoArrays.digitalMinimum[i] ),\n        digitalMaximum: parseInt( signalInfoArrays.digitalMaximum[i] ),\n        prefiltering: signalInfoArrays.prefiltering[i],\n        nbOfSamples: parseInt( signalInfoArrays.nbOfSamples[i] ),\n        reserved: signalInfoArrays.reserved[i],\n      })\n    }\n\n    return {\n      offset: offset,\n      header: header\n    }\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Decodes the data. Must be called after the header is decoded.\n  * @param {Number} byteOffset - byte size of the header\n  */\n  _decodeData( byteOffset, header ){\n    if(! this._inputBuffer ){\n      console.warn(\"A input buffer must be specified.\");\n      return;\n    }\n\n    if(! header ){\n      console.warn(\"Invalid header\");\n      return;\n    }\n\n    var sampleType = Int16Array;\n\n    // the raw signal is the digital signal\n    var rawSignals = new Array(header.nbSignals);\n    var physicalSignals = new Array(header.nbSignals);\n    // allocation some room for all the records\n    for(var ns=0; ns<header.nbSignals; ns++){\n      rawSignals[ns] = new Array(header.nbDataRecords);\n      physicalSignals[ns] = new Array(header.nbDataRecords);\n    }\n\n    // the signal are faster varying than the records\n    for(var r=0; r<header.nbDataRecords; r++){\n      for(var ns=0; ns<header.nbSignals; ns++){\n        var signalNbSamples = header.signalInfo[ns].nbOfSamples;\n        var rawSignal = codecutils.CodecUtils.extractTypedArray( this._inputBuffer, byteOffset, sampleType, signalNbSamples );\n        byteOffset += signalNbSamples * sampleType.BYTES_PER_ELEMENT;\n        rawSignals[ns][r] = rawSignal;\n\n\n        // compute the scaled signal\n        var physicalSignal = new Float32Array( rawSignal.length ).fill(0);\n        var digitalSignalRange = header.signalInfo[ns].digitalMaximum - header.signalInfo[ns].digitalMinimum;\n        var physicalSignalRange = header.signalInfo[ns].physicalMaximum - header.signalInfo[ns].physicalMinimum;\n\n\n        for(var index=0; index<signalNbSamples; index++){\n          physicalSignal[ index ] = (((rawSignal[index] - header.signalInfo[ns].digitalMinimum) / digitalSignalRange ) * physicalSignalRange) + header.signalInfo[ns].physicalMinimum;\n        }\n\n        //physicalSignals.push( physicalSignal );\n        physicalSignals[ns][r] = physicalSignal;\n\n      }\n    }\n\n    this._output = new Edf( header, rawSignals, physicalSignals );\n\n\n  } /* END method */\n\n\n\n  /**\n  * Get the output as an object. The output contains the the header (Object),\n  * the raw (digital) signal as a Int16Array and the physical (scaled) signal\n  * as a Float32Array.\n  * @return {Object} the output.\n  */\n  getOutput(){\n    return this._output;\n  }\n\n}\n\nexport { EdfDecoder };\n"],"names":["this","createCommonjsModule","Edf","header","rawSignals","physicalSignals","_header","_physicalSignals","_rawSignals","durationDataRecordsSec","localRecordingId","nbDataRecords","nbSignals","patientId","recordingDate","index","reserved","signalInfo","length","console","warn","digitalMaximum","digitalMinimum","physicalMinimum","physicalMaximum","label","nbOfSamples","physicalDimension","prefiltering","transducerType","record","recordStart","howMany","recordEnd","totalSize","i","concatSignal","Float32Array","offset","set","EdfDecoder","_inputBuffer","_output","buff","headerInfo","_decodeHeader","_decodeData","e","dataFormat","codecutils","CodecUtils","getString8FromBuffer","trim","recordingStartDate","recordingStartTime","date","split","time","Date","nbBytesHeaderRecord","parseInt","that","getAllSections","sizeOfEachThing","allThings","push","signalInfoArrays","parseFloat","byteOffset","sampleType","Int16Array","Array","ns","r","signalNbSamples","rawSignal","extractTypedArray","BYTES_PER_ELEMENT","physicalSignal","fill","digitalSignalRange","physicalSignalRange"],"mappings":"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"}